/* Sidebar Footer */
.sidebar-footer {
    padding: 1rem;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    /* Tighter gap for list feel */
    align-items: center;
    border-top: 1px solid rgba(255, 255, 255, 0.05);
    margin-top: auto;
    opacity: 0;
    transition: opacity 0.3s;
    width: 100%;
}

.sidebar-footer:has(.profile-menu-container) {
    opacity: 1;
    /* Fade in when it has content */
}

/* Sidebar Collapsed State adjustments */
.sidebar.collapsed .sidebar-footer {
    padding: 1rem 0;
}

/* Items inside Sidebar - Match Layout of Nav Items */
.profile-menu-container.in-sidebar {
    margin-right: 0 !important;
    display: flex;
    align-items: center;
    width: 100%;
    padding: 0.85rem 1rem;
    /* Match nav-item padding */
    border-radius: 12px;
    /* Match width border-radius var if possible, hardcoded to match nav-item usually */
    cursor: pointer;
    transition: background 0.2s, color 0.2s;
    color: #cbd5e1;
    /* Text color matching sidebar */
    box-sizing: border-box;
    /* Ensure padding doesnt break width */
}

.profile-menu-container.in-sidebar:hover {
    background-color: rgba(255, 255, 255, 0.05);
    color: white;
}

/* Icon Containers adjustments inside Sidebar */
.profile-menu-container.in-sidebar .notif-btn,
.profile-menu-container.in-sidebar .avatar-btn {
    /* Make them look like icons */
    background: transparent;
    border: none;
    box-shadow: none;
    padding: 0;
    width: 24px;
    /* Standardize width to match sidebar icons */
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    /* Disable transform on hover within the row hover */
    transform: none !important;
}

/* Specific fix for Lottie in Notif when in sidebar */
.profile-menu-container.in-sidebar .notif-btn lottie-player {
    width: 24px !important;
    height: 24px !important;
    filter: brightness(0) invert(1);
    /* Make it white like other icons */
    opacity: 0.8;
}

.profile-menu-container.in-sidebar:hover .notif-btn lottie-player {
    opacity: 1;
}

/* Specific fix for Avatar when in sidebar */
.profile-menu-container.in-sidebar .avatar-btn {
    /* If we want to keep it looking like a User Icon */
    color: currentColor;
    /* Inherit form parent */
    /* Remove white bg */
    background: transparent;
}

.profile-menu-container.in-sidebar .avatar-btn i {
    width: 20px;
    height: 20px;
}

/* Labels */
.profile-menu-container.in-sidebar .footer-label {
    display: block !important;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* Collapsed State: Hide Labels, Center Icons */
.sidebar.collapsed .profile-menu-container.in-sidebar {
    justify-content: center;
    padding: 0.85rem 0;
}

.sidebar.collapsed .profile-menu-container.in-sidebar .footer-label {
    display: none !important;
    opacity: 0;
}

/* Dropdown Positioning for Sidebar */
/* Dropdown Positioning for Sidebar */
.profile-menu-container.in-sidebar .dropdown-menu {
    top: auto;
    bottom: 0;
    left: 100%;
    margin-left: 10px;
    margin-top: 0;
    margin-bottom: 0;
    transform-origin: bottom left;
    z-index: 9999;
    /* Ensure on top */
}

.profile-menu-container.in-sidebar .notif-dropdown {
    top: auto;
    bottom: 0;
    left: 100%;
    right: auto;
    margin-left: 10px;
    margin-top: 0;
    /* Reset global margin */
    z-index: 9999;
    /* Ensure on top */
}

/* Header Moved State */
.profile-menu-container.in-header {
    margin-right: 0.5rem;
}

.profile-menu-container.in-header .footer-label {
    display: none !important;
}


.profile-menu-container.in-header .dropdown-menu,
.profile-menu-container.in-header .notif-dropdown {
    top: 100%;
    bottom: auto;
    left: auto;
    right: 0;
    margin-top: 0.5rem;
    z-index: 9999;
}

/* Style buttons in header to match reference (grey circles) */
.profile-menu-container.in-header .notif-btn,
.profile-menu-container.in-header .avatar-btn {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background-color: rgba(255, 255, 255, 0.1);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    border: none;
    transition: background 0.2s;
}

.profile-menu-container.in-header .notif-btn:hover,
.profile-menu-container.in-header .avatar-btn:hover {
    background-color: rgba(255, 255, 255, 0.2);
}

/* Fix Lottie filter in header if needed */
.profile-menu-container.in-header .notif-btn lottie-player {
    filter: brightness(0) invert(1);
    /* Ensure white icon */
}